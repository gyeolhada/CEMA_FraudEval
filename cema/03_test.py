# =============================================================
# æ–‡ä»¶åï¼šcema/03_generate_candidates.py (æ–¹æ¡ˆ 3 å¼ºåŒ–ç‰ˆ)
# åŠŸèƒ½ï¼šç”Ÿæˆå¤šç±»å‹å¯¹æŠ—å€™é€‰å¥ï¼ˆHotFlip + FD + TextBuggerï¼Œå¼ºåŒ–å­—å…¸ï¼‰
# =============================================================

import os
os.environ["WANDB_DISABLED"] = "true"
os.environ["WANDB_MODE"] = "offline"
os.environ["HF_HUB_DISABLE_SYMLINKS_WARNING"] = "1"
os.environ["OMP_NUM_THREADS"] = "1"

import torch
import pandas as pd
import numpy as np
import random
from tqdm import tqdm
import jieba
from sentence_transformers import SentenceTransformer

# ---------------- å‚æ•°é…ç½® ----------------
TEST_PATH = "../data/testResult0.csv"
OUT_PATH = "../data/test_candidates0.csv"

SIM_THRESHOLD = 0.65
NUM_CANDS = 60
MAX_CHANGES = 10
EMB_MODEL = "sentence-transformers/all-MiniLM-L6-v2"
ROUNDS = 3
SEED = 42

random.seed(SEED)
np.random.seed(SEED)
torch.manual_seed(SEED)

# ---------------- è®¾å¤‡ ----------------
device = torch.device("cuda" if torch.cuda.is_available() else "cpu")
print(f" å½“å‰è®¾å¤‡ï¼š{device}")

# ---------------- åŠ è½½æ¨¡å‹ ----------------
print(" åŠ è½½å¥å‘é‡æ¨¡å‹ ...")
embedder = SentenceTransformer(EMB_MODEL, device=str(device))

# ---------------- å·¥å…·å‡½æ•° ----------------
def cosine_sim(a, b):
    return float(np.dot(a, b) / (np.linalg.norm(a) * np.linalg.norm(b) + 1e-9))

def filter_by_similarity(orig, cands, th=SIM_THRESHOLD, top_k=NUM_CANDS):
    if not cands:
        return []
    texts = [orig] + cands
    emb = embedder.encode(texts, convert_to_numpy=True)
    orig_emb = emb[0]
    cand_embs = emb[1:]
    sims = [cosine_sim(orig_emb, c) for c in cand_embs]
    paired = sorted(zip(cands, sims), key=lambda x: x[1], reverse=True)
    kept = [c for c, s in paired if s >= th]
    if not kept:
        kept = [c for c, s in paired[:3]]
    return kept[:top_k]

# =============================================================
# HotFlip å¼ºåŒ–å­—å…¸ï¼ˆè§†è§‰ç›¸ä¼¼å­— 500+ï¼‰
# =============================================================
VISUALLY_SIMILAR = {
    # ======== å¸¸ç”¨é«˜é¢‘æ±‰å­—ï¼ˆè¯ˆéª—å¯¹è¯é‡ç‚¹ï¼‰ ========
    "è´¦": ["è³¬", "å¸", "è´¦", "ğ°»", "ã‘‘"],
    "æ¬¾": ["ã§Ÿ", "æ¬µ", "ğ¬‡¹", "ğ¬£"],
    "å·": ["è™Ÿ", "å·", "ã•¿", "ğ¡¼"],
    "å¡": ["ã¡·", "å„", "ğ †¢"],
    "é‡‘": ["é‡’", "é’…", "ã»•", "ï¤Š"],
    "é“¶": ["éŠ€", "ğ¨§€", "ğ± ¿"],
    "è¡Œ": ["è¡", "è¡Œ", "ğ¢˜Œ"],
    "è½¬": ["è½‰", "ä¸“", "è»¢", "ğ¨”"],
    "è´¦": ["è´¦", "è³¬", "å¸", "ğ°»"],
    "æˆ·": ["æˆ¶", "æˆ·", "æˆ¸", "ã§™"],
    "å¯†": ["èœœ", "å®“", "ã¥"],
    "ç ": ["ç¢¼", "ç ", "ã‡»"],
    "åˆ¸": ["åŠµ", "ç‰¶", "å·", "ğ ¤"],
    "è´·": ["è²¸", "è´·", "ğ°¡±"],
    "å¿": ["å„Ÿ", "å°", "å°", "ğ«¡"],
    "è¯": ["è­‰", "è¯", "ğ¤¤¸"],
    "éªŒ": ["é©—", "éªŒ", "é™º"],
    "æ ¸": ["è¦ˆ", "æ ¸", "ğ£´"],
    "å®¡": ["å¯©", "å®¡", "å®¡ğ¡©‰"],
    "éª—": ["é¨™", "ã’¼", "é¨—", "ğ¨³•"],
    "ä¿¡": ["è¨Š", "è¨«", "ğ«½"],
    "æ¯": ["ã•", "å¸", "ã—¨"],
    "èµ„": ["è³‡", "ğ¥„™", "çœ¥"],
    "é¢": ["é¡", "é¢", "é Ÿ", "ğ©’¾"],
    "å®¢": ["å–€", "å®¢", "æª", "ã¤Ÿ"],
    "æœ": ["ğ§˜¹", "ã¦", "ğ§˜¸"],
    "é£": ["é¢¨", "é£Œ", "å‡®"],
    "é™©": ["éšª", "é™º", "ã¬"],
    "ç¨": ["ç¨…", "ç¨", "ğ¥¬¼"],
    "ä¿": ["å ¡", "ğ ‹†", "ã·„"],
    "å•": ["å–®", "å˜", "ğ±š©"],
    "ç ": ["ç¢¼", "ç ", "ğ²¯"],

    # ======== å¸¸ç”¨å­—ï¼ˆæ¯å­—å¤šä¸ªæ··æ·†å­—ç¬¦ï¼‰ ========
    "ä¸€": ["ä¸¨", "â¼€", "â€•", "â€”", "â€“"],
    "äºŒ": ["äºŒ", "ä¸‰", "ğ „", "ã€¢"],
    "ä¸‰": ["ä¸‰", "äºŒ", "ã€£"],
    "ä¸Š": ["ä¸„", "æ­¢", "åœŸ"],
    "ä¸‹": ["å", "åœ", "ä¸…"],
    "äºº": ["å…¥", "å…«", "äº»", "ã…", "ğ †¢"],
    "å£": ["å›—", "ã€‡", "å›™"],
    "æ—¥": ["æ›°", "ç™½", "ç›®", "æ—§"],
    "ç›®": ["âº«", "å†ƒ", "ä¸”"],
    "æ›°": ["æ—¥", "æ˜Œ"],
    "å": ["å„", "+", "â•‹"],
    "æœ¨": ["æœ¯", "æœ©", "æœª"],
    "æ°´": ["æ°µ", "æ°º", "æ°¸"],
    "ç«": ["ç¬", "ç­", "ç¾"],
    "åœŸ": ["åœ¡", "å£«", "åœ "],
    "å¤§": ["çŠ¬", "å¤ª", "å¤²", "ã­"],
    "å°": ["å°", "âºŒ", "ğ¡¯‚"],
    "å¥³": ["å¥´", "ğ¡£•"],
    "å­": ["å­‘", "å­’", "äº†", "ğ¡¥¼"],
    "äº†": ["å­‘", "å­’", "äº‡"],
    "ä¸­": ["ä»²", "ä¸¨å†…"],
    "å›½": ["å›¯", "å›¶", "åœ€"],
    "ä¸º": ["çˆ²", "ä¸º", "ğ²…"],
    "å¯": ["åµ", "ã ª"],
    "å¯¹": ["å¯¾", "å¯¾", "ğ¢—°"],
    "è¿›": ["è¿‘", "è¿š", "ã¬"],
    "é—®": ["å•", "ğ ²–"],
    "å›": ["å›˜", "å›¬", "å›™"],
    "åœ¨": ["æ‰—", "ğ«†"],
    "ä½ ": ["ä¼±", "ç¥¢", "ã‘"],
    "æˆ‘": ["ã§±", "æˆ’", "äœ£"],
    "ä»–": ["ä½—", "å®ƒ", "å¥¹"],
    "æ˜¯": ["æ˜°", "ğ£°", "ğ£…„"],
    "çš„": ["ğ£±¶", "æ—³", "ã"],
    "ä¸": ["ä¸•", "åœ", "èŠ£"],
    "æœ‰": ["å†‡", "ã‘©", "ğ ™¶"],
    "æ²¡": ["ç½’", "å†‡", "æ²’"],
    "è¦": ["è¦€", "è¦", "äœ…"],
    "ä¼š": ["æœƒ", "ã‘¹", "ğ …ƒ"],
    "èƒ½": ["èš", "èƒ½", "ç†Š"],
    "ç»™": ["çµ¦", "ğ° ›"],
    "å‘": ["é«®", "ç™º", "ğ¢¬¿"],
    "å¼€": ["å¼€", "ğ¢‡¤", "å¹µ"],
    "å·²": ["å·±", "å·³", "å·²", "å·²ğ ‚”"],

    # ======== è¯ˆéª—é¢†åŸŸç‰¹æ®Šæ··æ·†ï¼ˆè´¦å·/éªŒè¯ç /å®¢æœ/è½¬è´¦ï¼‰ ========
    "è´¦": ["è³¬", "å¸", "ğ°»", "ã‘‘"],
    "å·": ["è™Ÿ", "å·", "ğ¡¼", "ï¼ƒ"],
    "ç™»": ["ğ£¯", "ã«", "å‡³"],
    "å½•": ["éŒ„", "å½”", "å½•", "ğ „¡"],
    "å®¢": ["å–€", "æª", "ğ¡¤¢"],
    "æœ": ["ğ§˜¹", "æœ", "ğ§˜¸"],
    "è½¬": ["è½‰", "è»¢", "ğ¨”"],
    "è´¦": ["å¸³", "è³¬", "å¸"],
    "ç ": ["ç¢¼", "ğ¦‰°"],
    "å¸": ["å¹£", "å¸", "ğ¢"],
    "åº“": ["åº«", "åº“", "ğ¥«Œ"],
    "èµ„": ["è³‡", "ğ¥„™"],
    "ä¿¡": ["è¨«", "è®¯", "ğ«½"],
    "å®¡": ["å¯©", "å®¡", "ğ¡©‰"],
    "æ ¸": ["è¦ˆ", "æ ¸", "ğ£´"],
    "å†»ç»“": ["å†·ç»“", "å‡çµ", "å†»çµ"],

    # ======== æ•°å­—ï¼ˆå½¢ä¼¼ï¼‰ ========
    "0": ["O", "ã€‡", "ï¼", "â", "â­•"],
    "1": ["I", "l", "á›", "ï¼‘"],
    "2": ["Z", "ï¼’", "Æ§"],
    "3": ["Æ·", "à³©", "ï¼“"],
    "4": ["ï¼”", "á"],
    "5": ["S", "ï¼•", "ğŸ§", "Æ¼"],
    "6": ["Ğ±", "ï¼–", "â»"],
    "7": ["ï¼—", "â", "ğŸŸ"],
    "8": ["ï¼¢", "ï¼˜", "ğŒ "],
    "9": ["ï¼™", "ãŠˆ", "ğŸ¡"],

    # ======== è‹±æ–‡å­—æ¯ï¼ˆå¸¸è§æ¬ºè¯ˆæ··æ·†ï¼‰ ========
    "A": ["ï¼¡", "Ğ", "Î›", "áª", "ğ”„"],
    "B": ["ï¼¢", "Ğ’", "ÃŸ", "á´", "ğ”…"],
    "C": ["Ğ¡", "áŸ", "ï¼£", "Ï¹"],
    "D": ["ï¼¤", "á ", "á—ª"],
    "E": ["ï¼¥", "â‹¿", "ğ”ˆ", "Æ"],
    "F": ["ï¼¦", "Ïœ", "Ò’"],
    "G": ["ï¼§", "É¢"],
    "H": ["ï¼¨", "Ğ", "á»", "å„"],
    "I": ["ï¼‘", "l", "ä¸¨", "ï¼©"],
    "J": ["ï¼ª", "á«"],
    "K": ["ï¼«", "á¦"],
    "L": ["ï¼¬", "á", "å·¥"],
    "M": ["ï¼­", "á·", "ğ•„"],
    "N": ["ï¼®", "Ğ˜", "ğ•¹"],
    "O": ["ï¼¯", "0", "ã€‡", "â­•", "Ğ"],
    "P": ["ï¼°", "Ğ ", "á¢"],
    "Q": ["ï¼±", "Ï™"],
    "R": ["ï¼²", "á¡", "Ğ¯"],
    "S": ["ï¼³", "5", "Æ§", "ğŒ”"],
    "T": ["ï¼´", "âŠ¤", "ä¸"],
    "U": ["ï¼µ", "Õ"],
    "V": ["ï¼¶", "Ñ´"],
    "W": ["ï¼·", "Ñ "],
    "X": ["ï¼¸", "Ğ¥", "âœ•", "â•³"],
    "Y": ["ï¼¹", "Ò®"],
    "Z": ["ï¼º", "Æµ", "ä¹™"],

    # ======== Emoji / å…¨è§’ / æ‚é¡¹å¹²æ‰° ========
    " ": ["â€‚", "â€ƒ", "â€¯", "\u200b", "â €"],
    ".": ["ï¼", "ï½¡", "ã€‚"],
    "-": ["â€”", "â€“", "ï¼"],
    "_": ["ï¼¿", "ï¹"],
    "!": ["ï¼", "â—", "Çƒ"],
    "?": ["ï¼Ÿ", "Â¿", "ï¹–"],
    "@": ["ï¼ ", "ï¹«"],
    "#": ["ï¼ƒ", "â™¯", "â§‰"],
    "$": ["ï¼„", "ï¹©", "ğŸ’²"],
    "%": ["ï¼…", "ê™¨"],
    "&": ["ï¼†", "ï¹ "],
    "*": ["ï¼Š", "â", "âœ±"],
}

# =============================================================
# TextBugger æ¬ºè¯ˆæ›¿æ¢å­—å…¸ï¼ˆ500+ï¼‰
# =============================================================
BUGGER_REPLACE = {
"å†»ç»“è´¦æˆ·": ["å†»ç»“å¸æˆ·", "å†»ç»“Aæˆ·", "è´¦å†»ç»“"],
"æ”¯ä»˜å¯†ç ": ["æ”¯ä»˜å¯†", "æ”¯å¯†", "ZFPW"],
"åˆ·è„¸": ["äººè„¸æ‰«", "é¢éƒ¨è¯†", "åˆ·M"],
"è®¤è¯": ["è®¤Z", "Rè¯", "éªŒè¯æµç¨‹"],
"è¯¯æ“ä½œ": ["æ“ä½œè¯¯", "è¯¯ç‚¹", "è¯¯è§¦"],
"é™é¢": ["é™é¢åº¦", "é™é¢å€¼", "é¢åº¦é™åˆ¶"],
"èµ”ä»˜": ["èµ”å¿é‡‘", "Zèµ”ä»˜", "é‡‘èµ”"],
"è´£ä»»é™©": ["è´£ä»»ä¿", "ZRé™©", "ä¿è´£é™©"],
"ä¿å•å·": ["ä¿å•ID", "ä¿å•#", "BDN"],
"äºŒè¦ç´ ": ["2è¦ç´ ", "åŒè¦ç´ ", "2FA"],
"ä¸‰è¦ç´ ": ["3è¦ç´ ", "ä¸‰éªŒè¯", "3FA"],
"èµ„é‡‘æ± ": ["èµ„é‡‘ä»“", "ZJæ± ", "é‡‘åº“æ± "],
"è´§æ¬¾": ["è´§é‡‘", "è´·æ¬¾è´§", "HK"],
"è´¦æœŸ": ["å¸æœŸ", "è´¦Q", "ZQ"],
"å‚¬æ”¶": ["å‚¬æ¬¾", "Cæ”¶", "è¿½æ¬¾æµç¨‹"],
"æ»çº³é‡‘": ["æ»çº³è´¹", "é€¾æœŸè´¹", "ZNJ"],
"åˆåŒå·": ["åˆåŒç¼–å·", "åˆåŒ#", "HTH"],
"æ‰“å°ä»¶": ["æ‰“å°æ–‡ä»¶", "çº¸ä»¶", "æ‰“å°ææ–™"],
"åˆåŒå‰¯æœ¬": ["åˆåŒå‰¯ä»¶", "åˆåŒå¤å°", "åˆçº¦å‰¯ä»¶"],
"ç­¾ç« ": ["ç›–ç« ", "ç›–å°", "ç­¾å°"],
"æ³•åŠ¡éƒ¨": ["æ³•å¾‹éƒ¨", "æ³•åŠ¡éƒ¨é—¨", "FWB"],
"åˆåŒçº çº·": ["åˆçº¦çº çº·", "åˆåŒäº‰è®®", "åˆåŒçŸ›ç›¾"],
"è½¬å•": ["å˜å•", "è®¢å•è½¬ç§»", "è½¬ç§»å•"],
"ç¥¨æ®å·": ["ç¥¨æ®#", "PJå·", "ç¥¨å·"],
"è¿‡è´¦": ["è¿‡å¸", "è´¦å¤„ç†", "GZ"],
"ç™½åå•": ["ç™½åå½•", "å®‰å…¨åå•", "ç™½æ¸…å•"],
"é»‘åå•": ["é»‘åå½•", "é£é™©åå•", "é»‘æ¸…å•"],
"è¿è´¹é™©": ["è¿è¾“é™©", "è¿è´¹ä¿", "YFX"],
"ä¿é™©é‡‘": ["ä¿é™©æ¬¾", "ä¿é‡‘", "BXJ"],
"ç´¢èµ”": ["ç´¢è¡¥å¿", "ç´¢èµ”é‡‘", "SP"],
"è¿çº¦é‡‘": ["è¿è´¹é‡‘", "è¿çº¦è´¹ç”¨", "WYJ"],
"åˆè§„": ["è§„èŒƒåŒ–", "Hè§„", "åˆæ³•æµç¨‹"],
"å®¡è®¡": ["å®¡æ ¸è®¡", "è´¢åŠ¡ç¨½æ ¸", "å®¡æ ¸è®¡"],
"ç¥¨æ®æµè½¬": ["ç¥¨æ®æµ", "ç¥¨æµè½¬", "ç¥¨æ®è½¬ç§»"],
"çœŸä¼ªéªŒè¯": ["çœŸå‡éªŒè¯", "çœŸä¼ªæŸ¥éªŒ", "éªŒè¯çœŸä¼ª"],
"ä¼ªé€ ä¿¡æ¯": ["å‡é€ ä¿¡æ¯", "è™šå‡èµ„æ–™", "ä¼ªä¿¡æ¯"],
"é“¶è¡Œæµæ°´": ["é“¶è¡Œæ˜ç»†", "æµæ°´è®°å½•", "YLæ°´"],
"æ”¶å…¥è¯æ˜": ["æ”¶å…¥è¯", "æ”¶å…¥ææ–™", "æ”¶å…¥å•"],
"è´¦æˆ·å†»ç»“": ["å¸æˆ·å†»ç»“", "è´¦æˆ·é”å®š", "å†»ç»“ZA"],
"ä½™é¢å®": ["Yeå®", "YEB", "ä½™é¢äº§å“"],
"é»„é‡‘ç§¯å­˜": ["é»„é‡‘å­˜æ¬¾", "é‡‘ç§¯å­˜", "HJJC"],
"ä¿¡ç”¨æ”¯ä»˜": ["ä¿¡ç”¨ä»˜", "ä¿¡ä»˜", "XYæ”¯ä»˜"],
"åˆ†æœŸæœåŠ¡": ["åˆ†æœŸè®¡åˆ’", "åˆ†æœŸä¸šåŠ¡", "FQæœåŠ¡"],
"ç†è´¢äº§å“": ["ç†è´¢é¡¹", "ç†è´¢æœåŠ¡", "LCäº§å“"],
"è™šå‡å®¢æœ": ["å‡å®¢æœ", "ä¼ªå®¢æœ", "è™šå®¢æœ"],
"å‚¬ç¼´": ["å‚¬è´¹", "å‚¬ä»˜", "Cç¼´"],
"é“¶è¡Œæ ¸æŸ¥": ["é“¶è¡ŒæŸ¥éªŒ", "æ ¸æŸ¥é“¶è¡Œ", "YHæ ¸æŸ¥"],
"è¿‡æœŸéªŒè¯ç ": ["éªŒè¯ç è¿‡æœŸ", "è¿‡æœŸç ", "Xè¿‡æœŸ"],
"é€¾æœŸæœªè¿˜": ["æœªè¿˜é€¾æœŸ", "æœªè¿˜æ¬¾", "é€¾æœŸçŠ¶æ€"],
"çŸ­ä¿¡è´¹": ["çŸ­ä¿¡æœåŠ¡è´¹", "SMSè´¹", "çŸ­è®¯è´¹"],
"å®‰å…¨éªŒè¯": ["å®‰å…¨æ ¸éªŒ", "å®‰å…¨æ ¡éªŒ", "AQéªŒè¯"],
"é˜²éª—æé†’": ["é˜²è¯ˆéª—æé†’", "é˜²éª—é€šçŸ¥", "é£æ§æé†’"],
"äºŒç»´ç å¤±æ•ˆ": ["äºŒç»´ç è¿‡æœŸ", "ç å¤±æ•ˆ", "QRå¤±æ•ˆ"],
"å®¢æœåå¸­": ["å®¢æœäººå‘˜", "å®¢æœåå¸­", "äººå·¥å¸­ä½"],
"å®šä½å¼‚å¸¸": ["å®šä½é”™", "ä½ç½®å¼‚å¸¸", "å®šä½å¤±å¸¸"],
"è®¢å•å¼‚å¸¸": ["è®¢å•é—®é¢˜", "è®¢å•é£é™©", "è®¢å•é”™"],
"é£æ§ç³»ç»Ÿ": ["é£æ§æ¨¡å—", "é£é™©ç³»ç»Ÿ", "FKç³»ç»Ÿ"],
"é£æ§é™åˆ¶": ["é£é™©é™åˆ¶", "é£é™©é”å®š", "é£æ§é”"],
"å¼ºåˆ¶ä¸‹çº¿": ["è¢«ä¸‹çº¿", "å¼ºåˆ¶é€€å‡º", "è¸¢ä¸‹çº¿"],
"èµ„æ–™ä½œå‡": ["èµ„æ–™ä¼ªé€ ", "èµ„æ–™è™šå‡", "ä½œå‡ææ–™"],
"ç›—åˆ·": ["éæ³•åˆ·å¡", "è¢«åˆ·å¡", "ç›—ç”¨æ”¯ä»˜"],
"å¼‚å¸¸æ‰£æ¬¾": ["æ‰£è´¹å¼‚å¸¸", "é”™è¯¯æ‰£æ¬¾", "æ‰£é”™é’±"],
"å¡ç‰‡å°åœ": ["å¡å°åœ", "å¡åœç”¨", "å°å¡"],
"æœåŠ¡é€šé“": ["æœåŠ¡æ¸ é“", "é€šé“æœåŠ¡", "æœåŠ¡å…¥å£"],
"é«˜å±æ“ä½œ": ["é«˜é£é™©æ“ä½œ", "å±é™©æ“ä½œ", "é£æ§æ“ä½œ"],
"æ”¯ä»˜å¼‚å¸¸": ["æ”¯ä»˜é—®é¢˜", "æ”¯ä»˜é”™è¯¯", "æ”¯ä»˜å¼‚å¸¸çŠ¶æ€"],
"è´¦æˆ·é£æ§": ["å¸æˆ·ç®¡æ§", "è´¦å·é£æ§", "è´¦æˆ·å—æ§"],
"å†»ç»“æ—¶é—´": ["å†»ç»“æ—¶é•¿", "å†»ç»“å‘¨æœŸ", "é”å®šæ—¶é—´"],
"å®åä¿¡æ¯": ["çœŸå®å§“åä¿¡æ¯", "å®åèµ„æ–™", "å®åæ•°æ®"],
"è´¦å·æ³„éœ²": ["è´¦å·å¤–æ³„", "è´¦å·æ›å…‰", "æ³„éœ²è´¦å·"],
"å¯†ç æ³„éœ²": ["å¯†ç å¤–æ³„", "å¯†ç æ›å…‰", "æ³„éœ²å¯†ç "],
"æ“ä½œäºº": ["æ“ä½œè€…", "ä½¿ç”¨äºº", "æ“ä½œå‘˜"],
"é€€è´§é€€æ¬¾": ["é€€æ¬¾é€€è´§", "é€€è´§ç”³è¯·", "é€€è´§æµç¨‹"],
"ç»´æƒ": ["ç»´ä¿", "ä¿æŠ¤æƒç›Š", "ç»´æƒæµç¨‹"],
"å®¢æœä¸»ç®¡": ["å®¢æœè´Ÿè´£äºº", "å®¢æœç®¡ç†", "å®¢æœç»ç†"],
"å”®åä¸“çº¿": ["å”®åçƒ­çº¿", "å”®åç”µè¯", "SHä¸“çº¿"],
"æœåŠ¡å¼‚å¸¸": ["æœåŠ¡é—®é¢˜", "æœåŠ¡é”™è¯¯", "æœåŠ¡ä¸­æ–­"],
"äº¤æ˜“é£æ§": ["äº¤æ˜“é£é™©", "äº¤æ˜“é™åˆ¶", "æ”¯ä»˜é£æ§"],
"ç”³è¯‰": ["æŠ•è¯‰ç”³è¯‰", "ä¸Šè¯‰ç”³è¯·", "å¤æ ¸ç”³è¯·"],
"æ‹¦æˆª": ["é˜»æ‹¦", "é˜»æ–­", "æ‹¦æˆªæ“ä½œ"],
"å®¡æ ¸å¤±è´¥": ["å®¡æ ¸æ²¡è¿‡", "å®¡æ ¸ä¸é€šè¿‡", "å®¡æ ¸æœªé€šè¿‡"],
"å®¡æ ¸æˆåŠŸ": ["å®¡æ ¸é€šè¿‡", "å®¡æ ¸å·²è¿‡", "å®¡æ ¸å®Œæˆ"],
"æŒ‚å¤±": ["æŠ¥å¤±", "ç”³è¯·æŒ‚å¤±", "å¡æŒ‚å¤±"],
"å‚¬ä¿ƒ": ["ç£ä¿ƒ", "æé†’å¤„ç†", "å‚¬å¤„ç†"],
"å®¢æœä¸åœ¨": ["å®¢æœæš‚ç¦»", "æ— äººæ¥å¬", "å®¢æœç¦»å¸­"],
"å†»ç»“çŠ¶æ€": ["å†»ç»“ä¸­", "å¤„äºå†»ç»“", "é”å®šçŠ¶æ€"],
"å°ç¦": ["ç¦ç”¨", "è´¦æˆ·å°ç¦", "é™åˆ¶ä½¿ç”¨"],
"å¼ºåˆ¶æ³¨é”€": ["æ³¨é”€å¼ºåˆ¶", "è¢«æ³¨é”€", "è´¦æˆ·æ³¨é”€"],
"è®¾å¤‡å¼‚å¸¸": ["è®¾å¤‡é—®é¢˜", "è®¾å¤‡é”™è¯¯", "ç»ˆç«¯å¼‚å¸¸"],
"ç™»å½•è½¨è¿¹": ["ç™»å½•è®°å½•", "ç™»å½•å†å²", "è½¨è¿¹è®°å½•"],
"å¤šæ¬¡å¤±è´¥": ["åå¤å¤±è´¥", "å¤±è´¥æ•°å¤š", "è¿ç»­å¤±è´¥"],
"æˆæƒå¤±æ•ˆ": ["æˆæƒè¿‡æœŸ", "æˆæƒæ— æ•ˆ", "æƒé™å¤±æ•ˆ"],
"èº«ä»½é£é™©": ["èº«ä»½é—®é¢˜", "èº«ä»½å±é™©", "èº«ä»½å¯ç–‘"],
"èµ„æ–™ç¼ºå¤±": ["èµ„æ–™ä¸å…¨", "ç¼ºå°‘ææ–™", "ææ–™ç¼ºå¤±"],
"å®‰å…¨æ‹¦æˆª": ["å®‰å…¨é˜»æ–­", "å®‰å…¨é˜»æ‹¦", "ç³»ç»Ÿæ‹¦æˆª"],
"è½¬è´¦å¼‚å¸¸": ["è½¬è´¦é—®é¢˜", "è½¬è´¦é”™è¯¯", "è½¬è´¦å¤±è´¥"],
"ä»£ä»˜": ["å¸®ä»˜", "ä»£ç†æ”¯ä»˜", "ä»£ä¸ºæ”¯ä»˜"],
"ä¸šåŠ¡ç³»ç»Ÿ": ["ä¸šåŠ¡å¹³å°", "æœåŠ¡ç³»ç»Ÿ", "ä¸šåŠ¡ç«¯"],
"èµ„é‡‘ç›‘æ§": ["èµ„é‡‘ç›‘æµ‹", "èµ„é‡‘ç›‘å¯Ÿ", "é‡‘æµç›‘æ§"],
"ç´§æ€¥å†»ç»“": ["ç´§æ€¥é”å®š", "ä¸´æ—¶å†»ç»“", "ç«‹å³å†»ç»“"],
"æ¸…é€€": ["æ¸…é™¤è´¦æˆ·", "é€€æˆ·", "è´¦æ¸…é€€"],
"æˆæƒç ": ["æˆæƒå·", "æˆæƒç¼–å·", "SQM"],
"å¯¹è´¦å•": ["è´¦å•å¯¹ç…§", "è´¦å•æ˜ç»†", "è´¦å•è®°å½•"],
"å®‰å…¨é£é™©": ["é£é™©æç¤º", "å±é™©æç¤º", "é«˜å±æç¤º"],
"æˆæƒæ”¯ä»˜": ["æˆæƒä»˜æ¬¾", "æˆæƒä»˜", "SQæ”¯ä»˜"],
"å…³é—­æƒé™": ["å…³é—­æƒ", "æƒé™ç§»é™¤", "å–æ¶ˆæƒé™"],
"è¥æ”¶": ["æ”¶å…¥", "è¥æ”¶æ•°", "è¥ä¸šæ”¶å…¥"],
"åˆå¹¶è´¦å•": ["è´¦å•åˆå¹¶", "è´¦å•æ•´åˆ", "åˆè´¦å•"],
"éªŒè¯å¤±è´¥": ["éªŒè¯æœªé€šè¿‡", "éªŒè¯å‡ºé”™", "æ ¸éªŒå¤±è´¥"],
"èº«ä»½æ ¸éªŒ": ["èº«ä»½éªŒè¯", "èº«ä»½æ ¡éªŒ", "IDæ ¸éªŒ"],
"å¼‚å¸¸é£é™©": ["é«˜å±é£é™©", "å¯ç–‘é£é™©", "å±é™©é£é™©"],
"æ•°æ®è¢«ç›—": ["èµ„æ–™è¢«ç›—", "ä¿¡æ¯è¢«ç›—", "æ•°æ®æ³„éœ²"],
"æƒé™å…³é—­": ["æƒé™ç¦ç”¨", "è®¡ç®—æƒé™å…³é—­", "æƒé™ç»ˆæ­¢"],
"å¡ç‰‡è¿‡æœŸ": ["å¡è¿‡æœŸ", "å¡å¤±æ•ˆ", "å¡å·²è¿‡æœŸ"],
"å‡­è¯": ["è¯æ®ææ–™", "å‡­å•", "å‡­æ¡"],
"è®¢å•éªŒè¯": ["è®¢å•æ ¡éªŒ", "è®¢å•æ£€æµ‹", "è®¢å•ç¡®è®¤"],
"åˆåŒç¡®è®¤": ["åˆåŒæ ¸å¯¹", "åˆåŒç¡®è®¤æµç¨‹", "åˆåŒæŸ¥éªŒ"],
"å¯†ç é”™è¯¯": ["å¯†ç ä¸å¯¹", "è¾“å…¥é”™è¯¯", "passwdé”™è¯¯"],
"ç™»é™†å¯†ç ": ["ç™»å½•å¯†ç ", "å¯†ç ç™»é™†", "DLå¯†ç "],
"äºŒæ¬¡éªŒè¯": ["äºŒæ¬¡ç¡®è®¤", "åŒé‡éªŒè¯", "å¤æ ¸éªŒè¯"],
"æ•°æ®å¼‚å¸¸": ["æ•°æ®é”™è¯¯", "èµ„æ–™å¼‚å¸¸", "æ•°æ®é—®é¢˜"],
"è´¢äº§æŸå¤±": ["æŸå¤±è´¢äº§", "èµ„é‡‘æŸå¤±", "æŸå¤±é‡‘é¢"],
"è¯ˆéª—ç”µè¯": ["æ¬ºè¯ˆç”µè¯", "å¯ç–‘ç”µè¯", "å‡ç”µè¯"],
"é£é™©ç›‘æµ‹": ["é£é™©æ£€æµ‹", "é£æ§æ£€æµ‹", "é£é™©ç›‘å¯Ÿ"],
"éæ³•æ“ä½œ": ["è¿è§„æ“ä½œ", "é”™è¯¯æ“ä½œ", "éæ³•è¡Œä¸º"],
"èµ„äº§å—æŸ": ["èµ„äº§æŸå¤±", "èµ„äº§å‡å°‘", "ZCæŸå¤±"],
"å®¢æœä¸­å¿ƒ": ["æœåŠ¡ä¸­å¿ƒ", "å®¢æœå¹³å°", "å®¢æœå¤§å…"],
"æš‚åœæœåŠ¡": ["æœåŠ¡æš‚åœ", "æš‚æ—¶åœç”¨", "æš‚åœåŠŸèƒ½"],
"ä¸´æ—¶é”å®š": ["ä¸´æ—¶å†»ç»“", "ä¸´æ—¶åœç”¨", "é”å®šä¸´æ—¶"],
"è¿è§„è´¦å·": ["è¿è§„å¸æˆ·", "è¿è§„ID", "è¿è§„è´¦æˆ·"],
"æ¢å¤æœåŠ¡": ["æ¢å¤ä½¿ç”¨", "æ¢å¤åŠŸèƒ½", "æ¢å¤æƒé™"],
"ä½™é¢ä¸è¶³": ["ä½™é¢ä¸å¤Ÿ", "ä½™é¢ç¼ºå°‘", "ä½™é¢å°‘"],
"è®¢å•æ’¤é”€": ["è®¢å•å–æ¶ˆ", "è®¢å•ä½œåºŸ", "æ’¤é”€è®¢å•"],
"æ•°æ®ç¯¡æ”¹": ["æ•°æ®è¢«æ”¹", "æ•°æ®å˜åŒ–", "ç¯¡æ”¹è®°å½•"],
"é£é™©ç­‰çº§": ["é£é™©çº§åˆ«", "é£é™©åˆ†çº§", "é£æ§ç­‰çº§"],
"è´¢åŠ¡å¼‚å¸¸": ["è´¢åŠ¡é—®é¢˜", "è´¢åŠ¡é”™è¯¯", "è´¢åŠ¡é£é™©"],
"ç´§æ€¥è”ç³»": ["é©¬ä¸Šè”ç³»", "å°½å¿«è”ç³»", "ç´§è”"],
"æ¶‰è¯ˆ": ["æ¶‰éª—", "æ¶‰é£é™©", "æ¶‰æ¡ˆ"],
"å…¬å®‰æœºå…³": ["å…¬å®‰éƒ¨é—¨", "å…¬å®‰å•ä½", "å…¬å®‰å¤„"],
"å†»ç»“æªæ–½": ["é”å®šæªæ–½", "å†»ç»“æ–¹å¼", "å†»ç»“å¤„ç†"],
"ç³»ç»Ÿæ£€æµ‹": ["ç³»ç»Ÿå®¡æŸ¥", "ç³»ç»Ÿæ£€æŸ¥", "ç³»ç»Ÿç›‘æµ‹"],
"ç´§æ€¥å¤„ç†": ["é©¬ä¸Šå¤„ç†", "ç«‹å³å¤„ç†", "ç´§å¤„ç†"],
"è´¦å•é£é™©": ["è´¦å•å¼‚å¸¸", "è´¦å•é—®é¢˜", "è´¦å•å±é™©"],
"éæ³•è·åˆ©": ["éæ³•æ”¶ç›Š", "éæ³•è·åˆ©è¡Œä¸º", "éæ³•æ”¶å…¥"],
"ç”³è¯‰å…¥å£": ["ç”³è¯‰é€šé“", "ç”³è¯‰æäº¤", "ç”³è¯‰æ¸ é“"],
"è­¦æŠ¥": ["é£é™©è­¦æŠ¥", "ç³»ç»Ÿè­¦æŠ¥", "å¼‚å¸¸è­¦æŠ¥"],
"è‡ªåŠ¨æ‹¦æˆª": ["ç³»ç»Ÿæ‹¦æˆª", "è‡ªåŠ¨é˜»æ–­", "è‡ªåŠ¨é˜»æ‹¦"],
"å¼‚å¸¸é€šçŸ¥": ["é£é™©é€šçŸ¥", "ç³»ç»Ÿé€šçŸ¥", "æé†’é€šçŸ¥"],
"å®‰å…¨é”å®š": ["é”å®šå®‰å…¨", "å®‰å…¨å†»ç»“", "å®‰å…¨é”"],
"ç´§æ€¥éªŒè¯": ["ç´§æ€¥æ ¸éªŒ", "ç´§æ€¥æ ¡éªŒ", "ç´§æ€¥éªŒè¯æµç¨‹"],
"å†»ç»“é‡‘é¢": ["å†»ç»“èµ„é‡‘", "å†»ç»“æ¬¾é¡¹", "å†»ç»“é‡‘é¢åº¦"],
"é«˜å±è¡Œä¸º": ["é£é™©è¡Œä¸º", "å±é™©è¡Œä¸º", "å¯ç–‘è¡Œä¸º"],
"è®¾å¤‡ç»‘å®š": ["è®¾å¤‡å…³è”", "ç»‘å®šè®¾å¤‡", "è®¾å¤‡é…å¯¹"],
"è®¾å¤‡æ ¡éªŒ": ["è®¾å¤‡éªŒè¯", "è®¾å¤‡è®¤è¯", "è®¾å¤‡æ ¸éªŒ"],
"èµ„æ–™è¡¥å……": ["è¡¥å……èµ„æ–™", "è¡¥ææ–™", "è¡¥èµ„æ–™"],
"è®¤è¯å¤±æ•ˆ": ["éªŒè¯å¤±æ•ˆ", "è®¤è¯è¿‡æœŸ", "è®¤è¯æ— æ•ˆ"],
"æ‰¹é‡æ‰£æ¬¾": ["æ‰¹æ‰£æ¬¾", "æ‰¹æ‰£", "æ‰¹é‡æ”¶è´¹"],
"å¼ºåˆ¶å®Œæˆ": ["å¼ºåˆ¶æ‰§è¡Œ", "å¼ºå®Œæˆ", "å¼ºåˆ¶å¤„ç†"],
"è´¦æˆ·é£é™©": ["è´¦å·é£é™©", "è´¦æˆ·å±é™©", "è´¦æˆ·å¯ç–‘"],
"èµ„äº§å¼‚å¸¸": ["èµ„äº§é—®é¢˜", "èµ„äº§é”™è¯¯", "èµ„äº§å¼‚å¸¸çŠ¶æ€"],
"æˆæƒå¼‚å¸¸": ["æˆæƒé—®é¢˜", "æˆæƒé”™è¯¯", "æˆæƒå¼‚å¸¸çŠ¶æ€"],
"é€€æ¬¾å¤±è´¥": ["é€€æ¬¾æœªæˆåŠŸ", "é€€æ¬¾å¼‚å¸¸", "é€€æ¬¾é”™è¯¯"],
"é€€æ¬¾æˆåŠŸ": ["é€€æ¬¾å·²å®Œæˆ", "å·²é€€æ¬¾", "é€€æ¬¾ç»“æŸ"],
"æç°ç”³è¯·": ["å–ç°ç”³è¯·", "æç°è¯·æ±‚", "TXç”³è¯·"],
"æç°å¼‚å¸¸": ["æç°é—®é¢˜", "æç°é”™è¯¯", "æç°å¤±è´¥"],
"æç°é£æ§": ["æç°é™åˆ¶", "æç°é£é™©", "æç°ç®¡æ§"],
"è´¦æˆ·æ³¨é”€": ["æ³¨é”€è´¦æˆ·", "å…³é—­è´¦æˆ·", "åˆ é™¤è´¦æˆ·"],
"è®¢å•é”å®š": ["è®¢å•å†»ç»“", "è®¢å•è¢«é”", "è®¢å•å—æ§"],
"ç³»ç»Ÿç»´æŠ¤": ["ç³»ç»Ÿæ›´æ–°", "ç»´æŠ¤ç³»ç»Ÿ", "ç»´æŠ¤ä¸­"],
"æ¢å¤è®¿é—®": ["æ¢å¤ç™»å½•", "æ¢å¤è¿›å…¥", "æ¢å¤è¿›å…¥æƒé™"],
"ç³»ç»Ÿæç¤º": ["ç³»ç»Ÿæé†’", "æç¤ºå†…å®¹", "ç³»ç»Ÿä¿¡æ¯"],
"èº«ä»½å¼‚å¸¸": ["èº«ä»½é—®é¢˜", "èº«ä»½ä¸ç¬¦", "èº«ä»½è­¦ç¤º"],
"äº¤æ˜“è­¦å‘Š": ["äº¤æ˜“æç¤º", "äº¤æ˜“é£é™©è­¦å‘Š", "é£é™©è­¦ç¤º"],
"å†»ç»“æç¤º": ["å†»ç»“æé†’", "é”å®šæé†’", "å†»ç»“é€šçŸ¥"],
"æ¢å¤è´¦å·": ["æ¢å¤è´¦", "è´¦å·æ¢å¤", "æ¢å¤ä½¿ç”¨"],
"è¡¥å……è®¤è¯": ["è¡¥è®¤è¯", "è¡¥å……éªŒè¯", "è¡¥éªŒè¯"],
"ç´§æ€¥é€šçŸ¥": ["ç´§é€šçŸ¥", "é£é™©é€šçŸ¥", "ç³»ç»Ÿç´§æ€¥é€šçŸ¥"],
"éªŒè¯ç è¾“å…¥é”™è¯¯": ["éªŒè¯ç é”™", "è¾“å…¥éªŒè¯ç é”™è¯¯", "éªŒè¯ç ä¸å¯¹"],
"é£é™©äº¤æ˜“": ["å¯ç–‘äº¤æ˜“", "å±é™©äº¤æ˜“", "é«˜å±äº¤æ˜“"],
"å¼‚å¸¸æ´»åŠ¨": ["å¯ç–‘æ´»åŠ¨", "æ´»åŠ¨å¼‚å¸¸", "å±é™©æ´»åŠ¨"],
"é«˜çº§é£æ§": ["é«˜çº§é£é™©", "é«˜ç­‰çº§é£æ§", "é«˜çº§é£é™©æ§åˆ¶"],
"æ”¯ä»˜é˜»æ–­": ["æ”¯ä»˜æ‹¦æˆª", "æ”¯ä»˜é˜»æ‹¦", "æ”¯ä»˜ä¸­æ–­"],
"å®‰å…¨ä¸­å¿ƒ": ["å®‰å…¨å¹³å°", "å®‰å…¨éƒ¨é—¨", "å®‰å…¨ç®¡ç†"],
"å–æ¶ˆæˆæƒ": ["ç§»é™¤æˆæƒ", "å–æ¶ˆæƒé™", "æ’¤é”€æˆæƒ"],
"äº¤æ˜“å¤±è´¥": ["äº¤æ˜“æœªå®Œæˆ", "äº¤æ˜“æœªæˆåŠŸ", "æ”¯ä»˜å¤±è´¥"],
"äº¤æ˜“æˆåŠŸ": ["äº¤æ˜“å®Œæˆ", "æ”¯ä»˜æˆåŠŸ", "äº¤æ˜“ç»“æŸ"],
"ç»¼åˆé£é™©": ["ç»¼åˆå±é™©", "é£é™©æ€»è§ˆ", "é£é™©æ€»ä½“"],
"å†»ç»“è­¦ç¤º": ["å†»ç»“è­¦å‘Š", "é”å®šè­¦ç¤º", "å†»ç»“é£é™©"],
"å¡å·å¼‚å¸¸": ["å¡å·é£é™©", "å¡å·é—®é¢˜", "å¡å·ä¸ç¬¦"],
"èº«ä»½è¯†åˆ«": ["èº«ä»½è¯†åˆ«æµç¨‹", "IDè¯†åˆ«", "èº«ä»½ç¡®è®¤"],
"å®‰å…¨ç­–ç•¥": ["å®‰å…¨æ–¹æ¡ˆ", "é˜²æŠ¤ç­–ç•¥", "å®‰ç­–"],
"è‡ªåŠ¨å†»ç»“": ["è‡ªåŠ¨é”å®š", "è‡ªåŠ¨åœç”¨", "è‡ªåŠ¨æš‚åœ"],
"èµ„é‡‘å¼‚å¸¸": ["èµ„é‡‘é—®é¢˜", "èµ„é‡‘é”™è¯¯", "èµ„é‡‘é£é™©"],
"é™æ—¶å¤„ç†": ["é™æ—¶å®Œæˆ", "é™æ—¶æ“ä½œ", "é™æ—¶å¤„ç†åŠ¨ä½œ"],
"åæ´—é’±": ["AML", "åé»‘é’±", "åéæ³•èµ„é‡‘"],
"å¯ç–‘ç™»å½•": ["å¼‚å¸¸ç™»å½•", "å±é™©ç™»å½•", "é£é™©ç™»å½•"],
"æ³¨é”€ç”³è¯·": ["å…³é—­ç”³è¯·", "æ³¨é”€è¯·æ±‚", "åˆ å·ç”³è¯·"],
"è¶…é¢ä½¿ç”¨": ["è¶…é™ä½¿ç”¨", "è¶…è¿‡é™é¢", "è¿‡åº¦ä½¿ç”¨"],
"æ•æ„Ÿæƒé™": ["å±é™©æƒé™", "é«˜æ•æƒé™", "æ•æƒé™"],
"å®‰å…¨é˜²æŠ¤": ["å®‰å…¨ä¿æŠ¤", "å®‰å…¨æœºåˆ¶", "å®‰å…¨æªæ–½"],
"è½¬è´¦å¤±è´¥": ["è½¬è´¦æœªæˆåŠŸ", "è½¬è´¦å¼‚å¸¸", "è½¬è´¦é—®é¢˜"],
"è½¬è´¦æˆåŠŸ": ["è½¬è´¦å·²å®Œæˆ", "æˆåŠŸè½¬è´¦", "èµ„é‡‘åˆ°è´¦"],
"è­¦ç¤ºä¿¡æ¯": ["è­¦å‘Šä¿¡æ¯", "æç¤ºä¿¡æ¯", "è­¦ç¤ºå†…å®¹"],
"ç´§æ€¥é¢„è­¦": ["ç´§æ€¥è­¦å‘Š", "é¢„è­¦é€šçŸ¥", "ç³»ç»Ÿé¢„è­¦"],
"é«˜å±è®°å½•": ["é£é™©è®°å½•", "å¯ç–‘è®°å½•", "å±é™©è®°å½•"],
"å±é™©æç¤º": ["é£é™©æç¤º", "è­¦å‘Šæç¤º", "å±é™©æé†’"],
"éæ³•èµ„é‡‘": ["å±é™©èµ„é‡‘", "å¯ç–‘èµ„é‡‘", "éæ³•æ¬¾é¡¹"],
"è‡ªåŠ¨æ£€æµ‹": ["ç³»ç»Ÿæ£€æµ‹", "è‡ªåŠ¨å®¡æŸ¥", "è‡ªåŠ¨æ£€æŸ¥"],
"è§£ç»‘å¤±è´¥": ["è§£ç»‘é”™è¯¯", "è§£ç»‘æœªå®Œæˆ", "è§£ç»‘å¼‚å¸¸"],
"è§£ç»‘æˆåŠŸ": ["è§£ç»‘å®Œæˆ", "è§£ç»‘æˆåŠŸ", "å·²è§£ç»‘"],
"æŒç»­éªŒè¯": ["æŒç»­æ ¸éªŒ", "æŒç»­æ ¡éªŒ", "è¿ç»­éªŒè¯"],
"æ•°æ®åŒæ­¥": ["èµ„æ–™åŒæ­¥", "åŒæ­¥æ•°æ®", "èµ„æ–™åŒæ­¥"],
"ç™»å½•å¤±è´¥": ["ç™»é™†å¤±è´¥", "ç™»å½•æœªæˆåŠŸ", "ç™»å½•é”™è¯¯"],
"ç™»å½•æˆåŠŸ": ["ç™»é™†æˆåŠŸ", "ç™»å½•å®Œæˆ", "å·²ç™»å½•"],
"èº«ä»½é”å®š": ["èº«ä»½å†»ç»“", "IDé”å®š", "èº«ä»½é™åˆ¶"],
"è´¦æˆ·æ¢å¤": ["è´¦å·æ¢å¤", "æ¢å¤è´¦æˆ·", "æ¢å¤æƒé™"],
"å†»ç»“å¤„ç†": ["é”å®šå¤„ç†", "å†»ç»“æ‰§è¡Œ", "è¢«å†»ç»“å¤„ç†"],
"æƒé™å‡çº§": ["å‡çº§æƒé™", "æƒé™æé«˜", "æƒçº§æå‡"],
"éªŒè¯ç å¼‚å¸¸": ["éªŒè¯ç é—®é¢˜", "éªŒè¯ç é”™è¯¯", "éªŒè¯ç å¤±è´¥"],
"æ‰‹æœºå·å¼‚å¸¸": ["æ‰‹æœºå¼‚å¸¸", "å·ç å¼‚å¸¸", "ç”µè¯å¼‚å¸¸"],
"é£é™©æ‹¦æˆª": ["é£é™©é˜»æ–­", "é£é™©é˜»æ‹¦", "é£æ§é˜»æ–­"],
"åè®®ç¡®è®¤": ["åè®®æ ¸éªŒ", "åè®®ç­¾è®¤", "åè®®æŸ¥éªŒ"],
"å®‰å…¨é¢„è­¦": ["é£é™©é¢„è­¦", "å±é™©é¢„è­¦", "ç³»ç»Ÿé¢„è­¦"],
"ä¸´æ—¶å†»ç»“": ["ä¸´æ—¶é”å®š", "æš‚æ—¶å†»ç»“", "ä¸´å†»ç»“"],
"è´¦å·å—é™": ["è´¦æˆ·å—é™", "è´¦å·é™åˆ¶", "ä½¿ç”¨é™åˆ¶"],
"è´¦å•å¼‚å¸¸": ["è´¦å•é”™è¯¯", "è´¦å•é£é™©", "è´¦å•é—®é¢˜"],
"ç´§æ€¥æ’¤é”€": ["ç«‹å³æ’¤é”€", "ç´§æ’¤é”€", "æ’¤é”€æ“ä½œ"],
"é™åˆ¶è®¿é—®": ["ç¦æ­¢è®¿é—®", "è®¿é—®å—é™", "è®¿é—®é™åˆ¶"],
"ç³»ç»Ÿå´©æºƒ": ["ç³»ç»Ÿé”™è¯¯", "è½¯ä»¶å´©æºƒ", "ç³»ç»Ÿå®•æœº"],
"é”™è¯¯æç¤º": ["å¼‚å¸¸æç¤º", "ç³»ç»Ÿæç¤ºé”™è¯¯", "ç³»ç»Ÿé”™è¯¯"],
"è´¦æˆ·è¿ç§»": ["è´¦å·è¿ç§»", "è´¦æˆ·è½¬ç§»", "è´¦æˆ·ç§»åŠ¨"],
"éªŒè¯ä¿¡æ¯": ["æ ¸éªŒä¿¡æ¯", "æ ¡éªŒä¿¡æ¯", "éªŒè¯èµ„æ–™"],
"å®‰å…¨å‡çº§": ["ä¿æŠ¤å‡çº§", "å®‰å…¨å¢å¼º", "å®‰å…¨åŠ å›º"],
"ç´§æ€¥é”å·": ["ç´§é”å·", "ç«‹å³é”å·", "å·ç é”å®š"],
"èµ„æ–™æ›´æ–°": ["ä¿¡æ¯æ›´æ–°", "æ•°æ®æ›´æ–°", "æ›´æ–°èµ„æ–™"],
"èµ„é‡‘æ ¸éªŒ": ["èµ„é‡‘éªŒè¯", "èµ„é‡‘å®¡æŸ¥", "é‡‘æµæ ¸éªŒ"],
"è´¦æˆ·ä¿æŠ¤": ["è´¦å·ä¿æŠ¤", "å®‰å…¨ä¿æŠ¤", "å¸æˆ·ä¿æŠ¤"],
"å¯†ç é‡ç½®": ["é‡ç½®å¯†ç ", "ä¿®æ”¹å¯†ç ", "å¯†ç æ›´æ–°"],
"è´¦æˆ·å¼‚å¸¸": ["è´¦å·å¼‚å¸¸", "å¸æˆ·å¼‚å¸¸", "è´¦æˆ·é—®é¢˜"],
"ç³»ç»Ÿæ ¸æŸ¥": ["ç³»ç»ŸæŸ¥éªŒ", "ç³»ç»Ÿå®¡æŸ¥", "ç³»ç»Ÿæ£€æŸ¥"],
}

# =============================================================
# æ”»å‡»æ–¹æ³• 1ï¼šHotFlipï¼ˆå¼ºåŒ–ç‰ˆè§†è§‰æ‰°åŠ¨ï¼‰
# =============================================================
def hotflip_candidates(text, num_cands=15):
    cands = set()
    text_list = list(text)
    for _ in range(num_cands * 3):
        if not text_list:
            break

        idx = random.randint(0, len(text_list)-1)
        ch = text_list[idx]

        # ä» VISUALLY_SIMILAR è·å–æ›¿æ¢å­—ç¬¦ï¼Œå¦‚æœ ch ä¸åœ¨å­—å…¸é‡Œéšæœºé€‰ä¸€ä¸ª key
        new_ch_list = VISUALLY_SIMILAR.get(ch, [random.choice(list(VISUALLY_SIMILAR.keys()))])

        # ç¡®ä¿ new_ch æ˜¯å­—ç¬¦ä¸²
        if isinstance(new_ch_list, list):
            new_ch = random.choice(new_ch_list)
        else:
            new_ch = new_ch_list

        if new_ch != ch:
            new_text = text[:idx] + new_ch + text[idx+1:]
            cands.add(new_text)

        if len(cands) >= num_cands:
            break

    return list(cands)


# =============================================================
# æ”»å‡»æ–¹æ³• 2ï¼šFDï¼ˆéšæœºåˆ é™¤æ‰°åŠ¨ï¼‰
# =============================================================
def fd_candidates(text, num_cands=12):
    cands = set()
    text_list = list(text)
    if len(text_list) < 3:
        return []
    for _ in range(num_cands * 3):
        k = random.randint(1, min(3, len(text_list)-1))
        idxs = random.sample(range(len(text_list)), k)
        new_text = "".join([ch for i,ch in enumerate(text_list) if i not in idxs])
        if new_text != text:
            cands.add(new_text)
        if len(cands) >= num_cands:
            break
    return list(cands)

# =============================================================
# æ”»å‡»æ–¹æ³• 3ï¼šTextBuggerï¼ˆå­—ç¬¦ + è¯çº§å¤šæ‰°åŠ¨ï¼‰
# =============================================================
def textbugger_candidates(text, num_cands=15):
    cands = set()
    text_list = list(text)
    for _ in range(num_cands * 4):
        idx = random.randint(0, len(text_list)-1)
        ch = text_list[idx]

        # å­—å…¸æ›¿æ¢
        if ch in BUGGER_REPLACE:
            new_text = text[:idx] + BUGGER_REPLACE[ch] + text[idx+1:]
            cands.add(new_text)

        # åŠ å™ªå£°
        noise = random.choice(["~","*","'", "Â·","^"])
        cands.add(text[:idx] + ch + noise + text[idx+1:])

        # åˆ é™¤å­—ç¬¦
        if len(text_list) > 1:
            new_text = text[:idx] + text[idx+1:]
            cands.add(new_text)

        if len(cands) >= num_cands:
            break
    return list(cands)

# =============================================================
# ä¸»æµç¨‹
# =============================================================
if __name__ == "__main__":
    print(f" è¯»å–æµ‹è¯•é›†ï¼š{TEST_PATH}")
    df = pd.read_csv(TEST_PATH, encoding="gbk")
    if "specific_dialogue_content" not in df.columns:
        raise KeyError("ç¼ºå°‘å­—æ®µ specific_dialogue_content")
    texts = df["specific_dialogue_content"].astype(str).tolist()

    candidates_all = []
    stats = {"avg_candidates_before_filter": [], "avg_candidates_after_filter": []}

    print(" æ­£åœ¨ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ï¼ˆHotFlip + FD + TextBugger å¼ºåŒ–ç‰ˆï¼‰...")
    for t in tqdm(texts, desc="Processing"):
        all_cands = set()
        for r in range(ROUNDS):
            all_cands.update(hotflip_candidates(t, num_cands=NUM_CANDS//3))
            all_cands.update(fd_candidates(t, num_cands=NUM_CANDS//3))
            all_cands.update(textbugger_candidates(t, num_cands=NUM_CANDS//3))

        all_cands = list(all_cands)
        stats["avg_candidates_before_filter"].append(len(all_cands))

        # ç›¸ä¼¼åº¦è¿‡æ»¤
        filtered = filter_by_similarity(t, all_cands, th=SIM_THRESHOLD, top_k=NUM_CANDS)
        if not filtered:
            filtered = filter_by_similarity(t, all_cands, th=0.6, top_k=min(3, len(all_cands))) or [t]

        stats["avg_candidates_after_filter"].append(len(filtered))
        candidates_all.append(filtered)

    # å†™å‡º CSV
    df["candidates_list"] = [str(c) for c in candidates_all]
    df.to_csv(OUT_PATH, index=False, encoding="utf-8-sig")

    print(f"\n ç”Ÿæˆå®Œæˆï¼Œå…± {len(df)} æ¡æ ·æœ¬ï¼Œä¿å­˜è‡³ï¼š{OUT_PATH}")
    print(f" å¹³å‡å€™é€‰æ•°ï¼ˆç­›é€‰å‰ï¼‰: {np.mean(stats['avg_candidates_before_filter']):.2f}")
    print(f" å¹³å‡å€™é€‰æ•°ï¼ˆç­›é€‰åï¼‰: {np.mean(stats['avg_candidates_after_filter']):.2f}")
    print(" æ”»å‡»æ–¹æ³•ï¼šHotFlip + FD + TextBuggerï¼ˆå¼ºåŒ–å­—å…¸ï¼‰")
